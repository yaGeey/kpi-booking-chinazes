# Звіт з лабораторної роботи №5: Інтеграція компонентів та управління залежностями

**Проект:** Booking Room - Сервіс бронювання кімнат  
**Репозиторій:** https://github.com/yaGeey/kpi-booking-chinazes  
**Демо:** https://kpi-booking-chinazes.vercel.app  
**Дата:** 8 листопада 2025

## Вступ

У рамках виконання лабораторної роботи №5 було завершено розробку всіх компонентів системи бронювання кімнат та проведено їх повну інтеграцію. Проект реалізовано на базі Next.js 15 з використанням серверних компонентів та server actions, що дозволило обійтися без традиційного backend-сервера. Інтеграція проводилась з використанням хмарних сервісів Vercel для деплою та NeonDB для бази даних, що забезпечило production-ready середовище для тестування всіх функціональних та нефункціональних вимог.

## Виконання функціональних вимог

Всі функціональні вимоги, визначені на початковому етапі проектування, були повністю реалізовані та протестовані. Для звичайних користувачів реалізовано можливість перегляду каталогу доступних кімнат з детальною інформацією про кожну, включаючи фотографії, опис, вартість та місткість. Користувачі можуть обирати дати заїзду та виїзду через інтерактивний календар, який автоматично блокує вже заброньовані періоди та відображає доступність кімнати в реальному часі. Форма бронювання включає валідацію всіх полів, перевірку коректності дат та розрахунок загальної вартості проживання.

Для адміністраторів створено повнофункціональну панель управління з безпечною системою авторизації. Адмін-панель надає можливість перегляду всіх запитів на бронювання з детальною інформацією про користувачів, обрані кімнати та дати проживання. Реалізовано функціонал зміни статусу бронювань з автоматичною відправкою email-повідомлень користувачам при кожній зміні статусу. Статистична панель відображає загальну кількість бронювань, розподіл по статусах та інформацію про завантаженість кімнат.

Система автоматичного сповіщення користувачів працює через інтеграцію з сервісом Resend. При створенні нового бронювання користувач отримує підтвердження на email з деталями запиту. Подальші зміни статусу бронювання також супроводжуються відповідними повідомленнями з інформацією про підтвердження, скасування або завершення бронювання.

## Виконання нефункціональних вимог

Продуктивність системи забезпечується використанням Server-Side Rendering та React Server Components, що дозволяє рендерити сторінки на сервері та надсилати клієнту готовий HTML. Це значно зменшує час First Contentful Paint та покращує показники Web Vitals. Automatic code splitting в Next.js гарантує, що користувач завантажує тільки необхідний JavaScript для конкретної сторінки. Використання Turbopack як bundler прискорює як dev, так і production збірки проекту.

Безпека системи реалізована на декількох рівнях. Всі операції з базою даних виконуються виключно на сервері через server actions, що унеможливлює прямий доступ клієнта до БД. SQL-запити використовують параметризовані шаблони для захисту від SQL-інʼєкцій. Система авторизації адміністратора базується на bcrypt хешуванні паролів з 10 раундами salt, а автентифікація відбувається через httpOnly cookies, які недоступні для JavaScript на клієнті. Це забезпечує захист від XSS атак та крадіжки сесій.

Масштабованість проекту забезпечується serverless архітектурою. Vercel автоматично масштабує додаток під навантаженням, створюючи додаткові інстанси edge functions при необхідності. NeonDB як serverless PostgreSQL також автоматично адаптується до навантаження, забезпечуючи стабільну роботу при збільшенні кількості користувачів. Модульна структура коду дозволяє легко додавати нові функції без переписування існуючого функціоналу.

Зручність використання забезпечується responsive дизайном на базі Tailwind CSS, який коректно відображається на всіх типах пристроїв від мобільних телефонів до десктопів. Інтерфейс інтуїтивно зрозумілий, з чіткою навігацією та зрозумілими підказками для користувачів. Форми містять валідацію в реальному часі з інформативними повідомленнями про помилки. Loading стани та skeleton screens покращують сприйняття швидкості роботи додатку.

## Інтеграція компонентів

Інтеграція frontend та backend компонентів відбувалась через Next.js App Router, який дозволяє безшовно поєднувати серверні та клієнтські компоненти в одному проекті. Server Components використовуються для сторінок з даними, які потрібно завантажити на сервері, таких як списки кімнат, деталі бронювань та адмін-панель. Client Components застосовуються для інтерактивних елементів, таких як форми, календарі та кнопки з обробкою подій.

Інтеграція з базою даних реалізована через модульні функції в папці lib/db, які експортують типізовані server actions. Кожна таблиця БД має відповідний модуль з CRUD операціями. Використання TypeScript забезпечує типобезпеку на всіх рівнях від БД до UI компонентів. Інтерфейси даних визначені в lib/types.ts та використовуються скрізь у проекті для уникнення помилок типізації.

Інтеграція email-сервісу Resend відбувається через окремий модуль lib/email.ts, який інкапсулює всю логіку формування та відправки листів. Цей модуль викликається автоматично при зміні статусу бронювання через функцію updateBookingStatus, що демонструє слабке зв'язування компонентів та дотримання принципу Single Responsibility.

Система авторизації інтегрована через API Routes в папці app/api/auth, які обробляють запити на логін, логаут та перевірку статусу авторизації. Middleware перевіряє наявність httpOnly cookie на серверній стороні перед рендерингом захищених сторінок, що забезпечує захист адмін-панелі на рівні сервера, а не клієнта.

## Управління залежностями

Проект використовує pnpm як менеджер пакетів, що забезпечує швидку установку залежностей та ефективне використання дискового простору через symlinks. Файл package.json містить чітко визначені версії всіх залежностей для забезпечення стабільності та відтворюваності збірок. Основні production залежності включають Next.js 15 canary, React 19, NeonDB serverless клієнт, bcryptjs для хешування та Resend для email-повідомлень.

Development залежності включають TypeScript компілятор, Biome для лінтингу та форматування, Tailwind CSS для стилізації, Jest та Testing Library для юніт-тестування. Всі типи для TypeScript встановлені як окремі пакети для забезпечення повної типобезпеки під час розробки. Конфлікти версій були вирішені через використання точних версій пакетів замість семантичного версіонування з каретом або тильдою.

Файл pnpm-lock.yaml зафіксований в Git для забезпечення однакових версій залежностей у всіх членів команди та на production сервері. Це критично важливо для уникнення ситуацій коли код працює локально але падає на production через різні версії пакетів.

## Тестування інтегрованої системи

Юніт-тестування проводилось для критичних компонентів з використанням Jest та React Testing Library. Тести покривають основні компоненти як RoomCard, BookingForm, Header та Footer, перевіряючи коректність рендерингу та обробки користувацьких подій. Утилітарні функції з lib/utils.ts також покриті тестами для забезпечення коректності обчислень вартості та валідації дат.

Інтеграційне тестування відбувалось вручну через перевірку всіх користувацьких сценаріїв від початку до кінця. Було протестовано повний цикл бронювання від вибору кімнати до отримання email-підтвердження. Перевірено роботу адмін-панелі включаючи авторизацію, зміну статусів бронювань та відображення статистики. Всі критичні шляхи користувачів працюють коректно без помилок.

Performance тестування проводилось через Lighthouse в Chrome DevTools. Показники Core Web Vitals знаходяться в зеленій зоні з LCP менше 2.5 секунд, FID менше 100ms та CLS менше 0.1. Accessibility score складає 95+ балів завдяки семантичній HTML розмітці та ARIA атрибутам. SEO оптимізація включає правильні meta теги, structured data та semantic HTML елементи.

## Deployment та CI/CD

Проект розгорнуто на платформі Vercel, яка надає автоматичний CI/CD pipeline інтегрований з GitHub. Кожен push в main гілку автоматично тригерить новий production deployment з повною збіркою проекту та деплоєм на глобальну CDN мережу. Pull requests створюють preview deployments з унікальними URL для тестування змін перед мерджем в main.

Environment variables налаштовані через Vercel dashboard та включають DATABASE_URL для підключення до NeonDB та RESEND_API_KEY для email-сервісу. Ці змінні захищені та недоступні в клієнтському коді. Build process включає TypeScript type checking, ESLint перевірку та Turbopack збірку оптимізованого production bundle.

NeonDB база даних налаштована з автоматичними backup щодня та connection pooling для ефективного управління з'єднаннями. Serverless архітектура бази дозволяє їй автоматично масштабуватись під навантаженням без ручного втручання. Latency знаходиться в межах прийнятних значень завдяки географічній близькості Vercel edge functions до NeonDB серверів.

## Виявлені проблеми та їх вирішення

Під час інтеграції була виявлена проблема з type errors в Next.js типізованих роутах при використанні redirect функції. Проблема була вирішена через правильне імпортування redirect з next/navigation та використання коректних типів для параметрів роутів. TypeScript конфігурація була оновлена для підтримки experimental.typedRoutes опції в Next.js.

Виникла складність з layout нестингом в App Router коли admin/login/layout.tsx успадковував стилі з admin/layout.tsx. Рішенням стало створення повністю ізольованого layout для сторінки логіну з власними імпортами шрифтів та стилів, що запобігло накладанню header з кнопкою logout на сторінці входу.

Проблеми з CORS не виникали завдяки монолітній архітектурі де API routes та frontend знаходяться в одному Next.js додатку. Це спрощує deployment та усуває необхідність в налаштуванні CORS headers для cross-origin запитів.

## Висновки

Інтеграція всіх компонентів проекту була успішно завершена з дотриманням всіх функціональних та нефункціональних вимог. Serverless архітектура на базі Next.js 15 виявилась оптимальним вибором для даного типу додатку, забезпечуючи простоту розробки, безпеку та продуктивність без необхідності підтримки окремого backend сервера.

Використання TypeScript на всіх рівнях проекту значно зменшило кількість runtime помилок та покращило developer experience через autocomplete та type checking. Модульна структура коду дозволяє легко розширювати функціонал без порушення існуючих компонентів.

Deployment на Vercel з автоматичним CI/CD забезпечує швидкі ітерації розробки та впевненість в стабільності production середовища. Інтеграція з NeonDB та Resend демонструє можливості сучасних serverless сервісів для побудови повноцінних веб-додатків без управління інфраструктурою.

Проект готовий до використання в реальних умовах та може обслуговувати користувачів з мінімальними витратами на infrastructure завдяки serverless підходу. Всі залежності актуальні, код покритий тестами, а документація містить вичерпні інструкції для розгортання та підтримки системи.
